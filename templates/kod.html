{% extends "base.html" %}

{% block title %} Codeify - {{kod.kodTitle}} {% endblock %}

{% block icerik %}
{% if request.user.is_authenticated %}
<div class="container striking-theme mb-4" style="border-radius: 15px; box-shadow: 0 8px 15px rgba(66, 165, 245, 0.5);">
  <div class="row mb-3 align-items-center">
    {% if request.user.is_superuser %}
      <button class="btn trash-btn striking-btn" data-bs-toggle="modal" data-bs-target="#deleteModal">
        <i class="fas fa-trash-alt"></i>
      </button>
    {% endif %}
    <div class="col-md-6 p-5 image-container">
      <img src="{{kod.resim.url}}" class="img-fluid rounded shadow-lg striking-image" alt="{{kod.kodTitle}}">
    </div>
    <div class="col-md-6 p-5 title-container text-start">
      <h1 class="title fade-in-striking">{{kod.kodTitle}}</h1>
      <h5 class="subtitle fade-in-striking-delay">{{kod.seoDescription}}</h5>
      {% if kod.programlamaDili == 'Python' %}
        <img src="https://upload.wikimedia.org/wikipedia/commons/c/c3/Python-logo-notext.svg" class="language-logo" alt="Python Logo">
      {% elif kod.programlamaDili == 'C++' %}
        <img src="https://upload.wikimedia.org/wikipedia/commons/1/18/ISO_C%2B%2B_Logo.svg" class="language-logo" alt="C++ Logo">
      {% elif kod.programlamaDili == 'C#' %}
        <img src="https://upload.wikimedia.org/wikipedia/commons/4/4f/Csharp_Logo.png" class="language-logo" alt="C# Logo">
      {% elif kod.programlamaDili == 'Java' %}
        <img src="https://upload.wikimedia.org/wikipedia/en/3/30/Java_programming_language_logo.svg" class="language-logo" alt="Java Logo">
      {% endif %}
    </div>

    <div class="col-12 mt-4 code-container">
      <div class="striking-border p-4 position-relative code-block-container">
        <button id="copyBtn" class="btn striking-btn copy-btn">Kodu Kopyala</button>
        <pre><code id="codeBlock" class="hljs fade-in-striking">{{ kod.kodDescription }}</code></pre>
      </div>
    </div>

  </div>
</div>

<div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content striking-modal">
      <div class="modal-header">
        <h5 class="modal-title" id="deleteModalLabel">Kodu Sil</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p>Bu kodu silmek istediğinize emin misiniz?</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary striking-btn" data-bs-dismiss="modal">İptal</button>
        <a href="{% url 'kodsil' slug=kod.slug %}" class="btn btn-danger striking-delete-btn">Sil</a>
      </div>
    </div>
  </div>
</div>

{% else %}
  {% include 'yonlendirme.html' %}
{% endif %}
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.3.1/highlight.min.js"></script>
<script>hljs.highlightAll();</script>
<style>
  .code-block-container {
  background: #1e1e1e; /* Daha kontrastlı bir arka plan */
  color: #f8f8f2; /* Kodun kolay okunabilir olması için açık renkli metin */
  border-radius: 12px;
  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.4); /* Daha belirgin bir gölge */
  padding: 20px;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.code-block-container:hover {
  transform: scale(1.02); /* Hover durumunda hafif bir büyütme efekti */
  box-shadow: 0 15px 30px rgba(0, 0, 0, 0.6);
}

.copy-btn {
  position: absolute;
  top: 10px;
  right: 10px;
  padding: 10px 15px;
  font-size: 0.9rem;
  background-color: #42a5f5;
  color: #fff;
  transition: all 0.4s ease;
  z-index: 10;
}

.copy-btn:hover {
  transform: scale(1.1) rotate(-3deg);
  background-color: #478ed1;
}

  .striking-theme {
    font-family: 'Orbitron', sans-serif;
    color: #333;
    background: linear-gradient(135deg, #f0f4f8, #d9e2ec);
    padding: 2rem;
  }
  .striking-btn {
    border-radius: 15px;
    background: linear-gradient(45deg, #42a5f5, #478ed1);
    color: #fff;
    font-weight: bold;
    transition: all 0.4s ease-in-out;
  }
  .striking-btn:hover {
    background: linear-gradient(45deg, #478ed1, #42a5f5);
    transform: translateY(-4px) rotate(2deg);
  }
  .striking-image {
    border-radius: 20px;
    box-shadow: 0 12px 25px rgba(0,0,0,0.2);
    transition: transform 0.5s ease, filter 0.4s ease;
    filter: grayscale(10%);
  }
  .striking-image:hover {
    transform: scale(1.05) rotate(-2deg);
    filter: grayscale(0%);
  }
  .title {
    font-size: 3rem;
    color: #0077b6;
    text-transform: uppercase;
    letter-spacing: 2px;
  }
  .subtitle {
    font-size: 1.3rem;
    color: #00b4d8;
  }
  .striking-border {
    border-radius: 15px;
    background: rgba(240, 244, 248, 0.85);
    box-shadow: 0 8px 15px rgba(66, 165, 245, 0.5);
    border: 2px dashed #42a5f5;
  }
  .striking-modal {
    background: #f0f4f8;
    border-radius: 20px;
    color: #333;
  }
  .striking-delete-btn {
    background-color: #e57373;
    transition: all 0.3s ease;
  }
  .striking-delete-btn:hover {
    background-color: #d32f2f;
    transform: scale(1.05);
  }
  .fade-in-striking {
    animation: fadeInStriking 0.8s forwards;
  }
  .fade-in-striking-delay {
    animation: fadeInStriking 0.8s 0.5s forwards;
  }
  @keyframes fadeInStriking {
    from { opacity: 0; transform: translateY(20px) skewY(3deg); }
    to { opacity: 1; transform: translateY(0) skewY(0); }
  }
  .copy-btn {
    position: absolute;
    top: 10px;
    right: 10px;
    transition: all 0.4s ease;
    font-weight: bold;
  }
  .copy-btn:hover {
    transform: scale(1.1) rotate(-3deg);
    background-color: #42a5f5;
  }
  .language-logo {
    position: absolute;
    top: 10px;
    right: 10px;
    width: 40px;
    height: 40px;
    opacity: 0.9;
  }
</style>
<script>
  document.getElementById('copyBtn').addEventListener('click', function() {
    const codeBlock = document.getElementById('codeBlock').innerText;
    navigator.clipboard.writeText(codeBlock).then(() => {
      this.innerText = 'Kopyalandı';
      this.classList.add('btn-success');
      this.classList.remove('btn-primary');
      setTimeout(() => {
        this.innerText = 'Kodu Kopyala';
        this.classList.add('btn-primary');
        this.classList.remove('btn-success');
      }, 2000);
    });
  });
</script>
{% endblock %}